---
title: 操作系统 - 系统调用
date: 2021-03-02 13:44:28
categories: 
- OS
- 系统调用
tags: [OS,system call]
keywords: [OS,system call]
---

一些常见的系统调用

<!---more--->

## linux网络系统调用


1. int socket(int domain, int type, int protocol)，返回socketfd；参数是创建socket的类型，比如IPV4/IPV6socket，套接字类型，具体协议等；
2. int bind(int sockfd, const struct sockaddr* addr, socklen_t addrlen)，socket创建成功后只知道使用哪个协议，不知道使用哪个地址。server端通常需要绑定ip地址和端口到socketfd上。成功返回0。
3. int listen(int sockfd, int backlog)，创建一个监听队列存放待处理的客户端连接。backlog表示监听队列的最大长度，，如果超过backlog，server端将不受理新的连接。成功返回0，否则返回-1.
4. int accept(int sockfd, struct sockaddr* addr, socklen_t* addrlen)，从监听的socketfd，返回一个新的连接产生的fd，获取远端的ip地址和port填到参数中。
//accept不感知任何变化，即使对端掉线或者kill进程造成CLOSE_WAIT

5. int connect(int sockfd, const struct sockaddr* serv_addr, socklen_t addrlen)，client端对对应的serverIP和Port调用connect进行连接，成功返回0.

6. int close(int fd)；将fd对应的引用计数-1；
7. int shutdown(int sockfd, inthowtoshutdown)，可以选择单向关闭这个sockfd或者双向都关闭。

