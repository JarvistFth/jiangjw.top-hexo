---
title: 海量数据专题
date: 2021-08-017 22:05:09
categories: 
- 面试常见
tags: [海量数据]
---
面试碰到的海量数据的处理问题，一般都是内存放不下的数据

<!---more--->

## 海量数据

### 判断某个数是否存在

bitmap，一个bit对应一个数，将出现过的数对应的bit置1；然后判断目标数的bit位是否为1.

### 找只出现一次的数
用2Bitmap法，每个正整数用两个bit的标志位，00表示没有出现，01表示出现1次，10表示出现多次。 

扫描这2.5亿个整数，变换Bitmap中相对应位，如果是00变01，01变10，10保持不变。所描完成 后，查看bitmap，把对应位是01的整数输出即可。


### 数字取交集
用bitmap；将两个bitmap对应位都是1的代表数字输出。（存在负数的话一个集合映射到正的bitset，一个映射到负的bitset）

### 中位数

桶排序。将所有数据分成多个区间，每个区间分别计算这个区间内的数据有多少个。（划分区间数依赖内存、每个数字重复的最大次数（每个区间计数时需要占用多少空间））

只保留中位数所在的区间。

对这个区间中的每个数分别再次进行计数。求出中位数。

### topK

小根堆，将待比较元素和堆顶元素比较。如果堆顶元素比待比较元素大，比较下一个；否则，将堆顶元素弹出，然后将待比较元素push入堆。

时间复杂度O(NlogK)


### 排序

多路归并外排序。

### 最大值
hash分文件，每个统计最大值；然后再在每个文件的最大值中取最大值。


### 字符串交集
对不同文件中的每个字符串进行hash取模，分别hash到不同的小文件。比如A文件hash到A1/A2/.../A999  B文件hash到B1/B2/../B999 （相同的字符串肯定不会hash到编号不对应的文件中）

然后分别比对A1-B1/A2-B2/../A999-B999，每个小文件用hashmap维护重复的字符串就可以了。



### 字符串统计
Trie树统计单词频率。